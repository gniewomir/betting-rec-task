# ADD 

## TypeORM over Prisma 

### Assumptions 
* Not considering ORMs that was not mentioned in original task like Drizzle, MicroORM, Sequelize etc. 
* Considering problem domain, there will be a need for heavily optimised raw sql queries when it comes to reporting and analytics 
* Considering problem domain, there might be a need for row level locking to prevent race conditions
* Maturity is more important than convenience for production code 
* Partial solutions enforce ugly hacks that are hard to understand later
* No separate database like Google Big Query for analytics and reporting

### Why TypeOrm?
* Choosing separate domain layer means, that we will be operating on Domain Models not database models
  * So, utility of Prisma is greatly diminished, as this is a mapping that we need to do ourselves anyway
* There will be need for complicated, join's heavy queries in analytics and reporting
  * Prisma
    * still have only partial, Prisma-managed support for joins in queries
    * TypedSQL feature for raw queries is immature and does not support dynamic columns  
  * TypeORM
    * provides query builder, allowing handcrafting complex parametrized queries using code 
    * does not contain half-solutions for raw SQL queries 
      * bad: you do not get any type safety when running raw sql 
      * good: getting type safe result, does not drive your query design like in TypedSQL case which sometimes provides type safety as long you do not use all features of the underlying database
      * reality: outside recruitment task, reporting and analytics will be probably delegated to separate database accessible for data team directly 
* There might be a need for row level locks 
  * TypeORM - possibile both via query builder and raw SQL 
  * Prisma - experimental feature or raw queries 
* Autogenerated migrations based on schema changes 
  * Both ORMs
* Transactional tests 
  * I know I can get tests enclosed in transaction for parallel testing running in TypeORM
  * There were attempts to do the same for Prisma, but topic is notoriously tricky, and checking it out is outside scope of this recruitment task
* Maturity
  * TypeORM mature but it's future is unclear
    * Changes in Governance give some hope though
  * Prisma is the market for the last 7 years
    * But most useful parts related to raw queries are still experimental   
    * TypedSQL a year or two? 

Overall impression is, that Prisma solves problems for fast prototyping, but for production problems it offers half-baked solutions, that work reliably only with assumption that you are doing simple things in a simple way or are willing to work around limitations. 

What could skew the scales a bit back towards prisma is potential assumption, that separate database will be used by data team.